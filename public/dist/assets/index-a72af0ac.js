import{s as e}from"./request-f726bc80.js";import{i as a,a as t}from"./ipcRenderer-a60b93ba.js";import{h as o,U as l,i as r,j as s,m as n,_ as p,r as u,o as i,b as d,a as c,w as m,e as f}from"./index-d16ae546.js";import"./index-391e0bf6.js";const h={upload:(a,t)=>e({url:"/encrty/upload",method:"post",data:a,baseURL:t,headers:{"Content-type":"application/json;charset=utf-8"}})},v=o({components:{UploadOutlined:l},setup(){const e=r(!1),o=s({path:"",outPath:"",name:"",exportList:[]});return{handleExportListInput:e=>{o.exportList=e.target.value.split(",").map((e=>e.trim()))},labelCol:{style:{width:"150px"}},wrapperCol:{span:14},onSubmit:async()=>{e.value=!0;const l={fileDecory:o.path,outDecory:o.outPath,name:o.name,excludeExtensions:Array.isArray(o.exportList)?o.exportList:[]};let r="";const s=JSON.stringify(l);await a.invoke(t.getCrossUrl,{name:"javaapp"}).then((e=>{r=e,n.info(`服务地址: ${e}`)})).catch((a=>{if(a.response){const{status:t}=a.response;n.error(`服务器错误(${t}): ${a.response.error}`),e.value=!1}})),await h.upload(s,r).then((a=>{200!=a.data.code?(n.error(a.data.msg),e.value=!1):(n.success(a.data.msg),e.value=!1)})).catch((a=>{if(a.response){const{status:t}=a.response;n.error(`服务器错误(${t}): ${a.response.error}`),e.value=!1}}))},ruleForm:o,loading:e}}}),x={id:"encrty-file"};const b=p(v,[["render",function(e,a,t,o,l,r){const s=u("a-input"),n=u("a-form-item"),p=u("a-button"),h=u("a-form");return i(),d("div",x,[c(h,{model:e.ruleForm,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:m((()=>[c(n,{label:"文件目录"},{default:m((()=>[c(s,{value:e.ruleForm.path,"onUpdate:value":a[0]||(a[0]=a=>e.ruleForm.path=a),placeholder:""},null,8,["value"])])),_:1}),c(n,{label:"输出文件目录"},{default:m((()=>[c(s,{value:e.ruleForm.outPath,"onUpdate:value":a[1]||(a[1]=a=>e.ruleForm.outPath=a),placeholder:""},null,8,["value"])])),_:1}),c(n,{label:"输出压缩包名称"},{default:m((()=>[c(s,{value:e.ruleForm.name,"onUpdate:value":a[2]||(a[2]=a=>e.ruleForm.name=a),placeholder:"如.zip之前的名字"},null,8,["value"])])),_:1}),c(n,{label:"排除加密的文件后缀"},{default:m((()=>[c(s,{value:e.ruleForm.exportList,"onUpdate:value":a[3]||(a[3]=a=>e.ruleForm.exportList=a),onInput:e.handleExportListInput,placeholder:"如qcow2, doc, pdf"},null,8,["value","onInput"])])),_:1}),c(n,{"wrapper-col":{xs:{span:24,offset:0},sm:{span:16,offset:8}}},{default:m((()=>[c(p,{type:"primary",loading:e.loading,onClick:e.onSubmit,style:{"font-size":"16px"}},{default:m((()=>[f("确定")])),_:1},8,["loading","onClick"]),c(p,{style:{"margin-left":"10px","font-size":"16px"}},{default:m((()=>[f("取消")])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col"])])}],["__scopeId","data-v-0cd974a2"]]);export{b as default};
