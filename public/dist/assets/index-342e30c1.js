import{i as e,a}from"./ipcRenderer-a60b93ba.js";import{s as l}from"./request-f726bc80.js";import{h as o,U as t,i as r,j as p,m as u,_ as n,r as s,o as d,b as i,a as f,w as m,e as c}from"./index-d16ae546.js";import"./index-391e0bf6.js";const v={upload:(e,a)=>l({url:"/api/UploadFileImpl",method:"post",data:e,baseURL:a,headers:{"Content-type":"application/x-www-form-urlencoded"}})},h=o({components:{UploadOutlined:t},setup(){const l=r([]),o=r(!1),t=p({path:"",mode:"0",content:"",regx:"",exportPath:""});return{labelCol:{style:{width:"150px"}},wrapperCol:{span:14},fileList:l,beforeUpload:e=>(l.value=[...l.value,e],!1),handleRemove:e=>{const a=l.value.indexOf(e),o=l.value.slice();o.splice(a,1),l.value=o},ruleForm:t,onSubmit:async()=>{const r=new FormData;l.value.forEach((e=>{r.append("upload[]",e)})),r.append("path",t.path),r.append("mode",t.mode),r.append("content",t.content),r.append("regx",t.regx),r.append("exportPath",t.exportPath);let p="";await e.invoke(a.getCrossUrl,{name:"goapp"}).then((e=>{p=e,u.info(`服务地址: ${e}`)})).catch((e=>{if(e.response){const{status:a}=e.response;u.error(`服务器错误(${a}): ${e.response.error}`)}})),await v.upload(r,p).then((e=>{200!=e.data.code?u.error(e.data.msg):u.success(e.data.msg)})).catch((e=>{if(e.response){const{status:a}=e.response;u.error(`服务器错误(${a}): ${e.response.error}`)}})),o.value=!0}}}}),b={id:"upload-file"};const x=n(h,[["render",function(e,a,l,o,t,r){const p=s("a-input"),u=s("a-form-item"),n=s("a-radio"),v=s("a-radio-group"),h=s("upload-outlined"),x=s("a-button"),_=s("a-upload"),C=s("a-form");return d(),i("div",b,[f(C,{model:e.ruleForm,"label-col":e.labelCol,"wrapper-col":e.wrapperCol},{default:m((()=>[f(u,{label:"公钥"},{default:m((()=>[f(p,{value:e.ruleForm.path,"onUpdate:value":a[0]||(a[0]=a=>e.ruleForm.path=a),placeholder:"如hwaf.publicKey"},null,8,["value"])])),_:1}),f(u,{label:"识别正则"},{default:m((()=>[f(p,{value:e.ruleForm.regx,"onUpdate:value":a[1]||(a[1]=a=>e.ruleForm.regx=a),placeholder:"如^HWAF\\((.*)\\)$"},null,8,["value"])])),_:1}),f(u,{label:"替换内容"},{default:m((()=>[f(p,{value:e.ruleForm.content,"onUpdate:value":a[2]||(a[2]=a=>e.ruleForm.content=a),placeholder:"如HWAF(%s)"},null,8,["value"])])),_:1}),f(u,{label:"导出文件路径"},{default:m((()=>[f(p,{value:e.ruleForm.exportPath,"onUpdate:value":a[3]||(a[3]=a=>e.ruleForm.exportPath=a),placeholder:"如D:\\\\"},null,8,["value"])])),_:1}),f(u,{label:"密钥模式"},{default:m((()=>[f(v,{value:e.ruleForm.mode,"onUpdate:value":a[4]||(a[4]=a=>e.ruleForm.mode=a),defaultValue:0},{default:m((()=>[f(n,{value:"0"},{default:m((()=>[c("C1C3C2")])),_:1}),f(n,{value:"1"},{default:m((()=>[c("C1C2C3")])),_:1})])),_:1},8,["value"])])),_:1}),f(u,{label:"上传文件"},{default:m((()=>[f(_,{"file-list":e.fileList,remove:e.handleRemove,"before-upload":e.beforeUpload},{default:m((()=>[f(x,null,{default:m((()=>[f(h),c(" Upload ")])),_:1})])),_:1},8,["file-list","remove","before-upload"])])),_:1}),f(u,{"wrapper-col":{xs:{span:24,offset:0},sm:{span:16,offset:8}}},{default:m((()=>[f(x,{type:"primary",onClick:e.onSubmit,style:{"font-size":"16px"}},{default:m((()=>[c("Create")])),_:1},8,["onClick"]),f(x,{style:{"margin-left":"10px","font-size":"16px"}},{default:m((()=>[c("Cancel")])),_:1})])),_:1})])),_:1},8,["model","label-col","wrapper-col"])])}],["__scopeId","data-v-a33f0c4c"]]);export{x as default};
